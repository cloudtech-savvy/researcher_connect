<!DOCTYPE html>
<html>
  <head>
    <title>{{ professor.name }}</title>
  </head>
  <body>

    <h1>{{ professor.name }}</h1>
    {% if professor.profile_photo %}
      <img src="{{ professor.profile_photo }}" alt="Profile Photo" style="max-width:120px;max-height:120px;"/>
    {% endif %}
    <p><strong>Department:</strong> {{ professor.department.name }}</p>
    <p><strong>Email:</strong> {{ professor.email }}</p>
    <p><strong>Affiliation:</strong> {{ professor.affiliation }}</p>
    <p><strong>Interests:</strong> {{ professor.interests }}</p>
    <p><strong>Citations:</strong> {{ professor.citations }}</p>
    <p><strong>h-index:</strong> {{ professor.h_index }}</p>
    <p><strong>i10-index:</strong> {{ professor.i10_index }}</p>

    <h2>Papers (Database)</h2>
    <ul>
      {% for paper in professor.papers.all %}
      <li>
        <strong>{{ paper.title }}</strong> ({{ paper.publication_year }})<br />
        <em>Authors:</em> {{ paper.authors }}<br />
        <em>Journal:</em> {{ paper.journal }}<br />
        <a href="{{ paper.url }}" target="_blank">View Paper</a><br />
        <em>Citations:</em> {{ paper.citation_count }}<br />
        {{ paper.abstract }}
      </li>
      {% empty %}
      <li>No papers found.</li>
      {% endfor %}
    </ul>

    {% if scholar_data %}
    <h2>Live Google Scholar Data</h2>
    {% if scholar_data.error %}
    <p style="color: red">
      Error fetching Google Scholar data: {{ scholar_data.error }}
    </p>
    {% else %}
    <p><strong>Name:</strong> {{ scholar_data.name }}</p>
    <p><strong>Affiliation:</strong> {{ scholar_data.affiliation }}</p>
    <p><strong>Interests:</strong> {{ scholar_data.interests|join:', ' }}</p>
    <p><strong>Citations:</strong> {{ scholar_data.citedby }}</p>
    <h3>Recent Publications (Live)</h3>
    <ul>
      {% for pub in scholar_papers %}
      <li>
        <strong>{{ pub.title }}</strong> ({{ pub.year }})<br />
        <a href="{{ pub.url }}" target="_blank">View Paper</a><br />
        {{ pub.abstract }}
      </li>
      {% empty %}
      <li>No recent publications found.</li>
      {% endfor %}
    </ul>
    {% endif %} {% endif %}

  <a href="{% url 'professor_search' %}">Back to Professors</a>
  </body>
</html>
